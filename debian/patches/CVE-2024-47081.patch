From 96ba401c1296ab1dda74a2365ef36d88f7d144ef Mon Sep 17 00:00:00 2001
From: Nate Prewitt <nate.prewitt@gmail.com>
Date: Wed, 25 Sep 2024 08:03:20 -0700
Subject: [PATCH] Only use hostname to do netrc lookup instead of netloc

---
 src/requests/utils.py | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

Index: requests-2.25.1+dfsg/requests/utils.py
===================================================================
--- requests-2.25.1+dfsg.orig/requests/utils.py
+++ requests-2.25.1+dfsg/requests/utils.py
@@ -198,13 +198,7 @@ def get_netrc_auth(url, raise_errors=Fal
             return
 
         ri = urlparse(url)
-
-        # Strip port numbers from netloc. This weird `if...encode`` dance is
-        # used for Python 3.2, which doesn't support unicode literals.
-        splitstr = b':'
-        if isinstance(url, str):
-            splitstr = splitstr.decode('ascii')
-        host = ri.netloc.split(splitstr)[0]
+        host = ri.hostname
 
         try:
             _netrc = netrc(netrc_path).authenticators(host)
